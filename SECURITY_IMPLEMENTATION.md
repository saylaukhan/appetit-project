# üîê –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–æ–ª–µ–π

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞—â–∏—Ç–∞ (React)**
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –í—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥ –≤ `ProtectedRoute.jsx` –ø–æ–∑–≤–æ–ª—è–ª –≤—Å–µ–º –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –£–±—Ä–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AccessDenied` –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç—É–ø–∞

### 2. **–ë—ç–∫–µ–Ω–¥ –∑–∞—â–∏—Ç–∞ (FastAPI)**
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: API —Ä–æ—É—Ç—ã –Ω–µ –±—ã–ª–∏ –∑–∞—â–∏—â–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **–°–æ–∑–¥–∞–Ω**: `auth_dependencies.py` —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω—ã**: –í—Å–µ —Ä–æ—É—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∫—É—Ö–Ω–∏, –∫—É—Ä—å–µ—Ä–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 3. **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π**
- ‚úÖ **–†–æ–ª–∏**: CLIENT, ADMIN, KITCHEN, COURIER
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ –±—ç–∫–µ–Ω–¥–µ
- ‚úÖ **–û—à–∏–±–∫–∏**: –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ

## üîë –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –†–æ–ª—å | –¢–µ–ª–µ—Ñ–æ–Ω | –ü–∞—Ä–æ–ª—å | –î–æ—Å—Ç—É–ø |
|------|---------|--------|--------|
| **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** | +77771234567 | admin123 | –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ |
| **–ö—É—Ö–Ω—è** | +77772345678 | kitchen123 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ –∫—É—Ö–Ω–∏ |
| **–ö—É—Ä—å–µ—Ä** | +77773456789 | courier123 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–æ–π |
| **–ö–ª–∏–µ–Ω—Ç** | +77774567890 | client123 | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –ø—Ä–æ—Ñ–∏–ª—å |

## üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–æ—É—Ç—ã:
- `/admin/*` - —Ç–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- `/kitchen` - —Ç–æ–ª—å–∫–æ **–∫—É—Ö–Ω—è**
- `/courier/*` - —Ç–æ–ª—å–∫–æ **–∫—É—Ä—å–µ—Ä**
- `/profile`, `/order/*` - —Ç–æ–ª—å–∫–æ **–∫–ª–∏–µ–Ω—Ç**

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `/api/v1/admin/*` - —Ç–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- `/api/v1/kitchen/*` - —Ç–æ–ª—å–∫–æ **–∫—É—Ö–Ω—è**
- `/api/v1/courier/*` - —Ç–æ–ª—å–∫–æ **–∫—É—Ä—å–µ—Ä**
- `/api/v1/analytics/*` - —Ç–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- `/api/v1/marketing/*` - —Ç–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- `/api/v1/users/*` - —Ç–æ–ª—å–∫–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- `/api/v1/orders/*` - —Ç–æ–ª—å–∫–æ **–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã:
```bash
# –ë—ç–∫–µ–Ω–¥ (—Ç–µ—Ä–º–∏–Ω–∞–ª 1)
cd backend
python main.py

# –§—Ä–æ–Ω—Ç–µ–Ω–¥ (—Ç–µ—Ä–º–∏–Ω–∞–ª 2)
cd frontend
npm run dev
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```
http://localhost:3000/test_auth_api.html
```

### 3. –¢–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

**‚ùå –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/admin`
2. –î–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/login`

**‚ùå –î–æ—Å—Ç—É–ø —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–æ–ª—å—é:**
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç (+77774567890 / client123)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ `http://localhost:3000/admin`
3. –î–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ø—Ä–∞–≤

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø:**
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (+77771234567 / admin123)
2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/admin`
3. –î–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

### 4. API —Ç–µ—Å—Ç—ã:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_auth_api.html` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö API endpoints.

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –§—Ä–æ–Ω—Ç–µ–Ω–¥:
- `frontend/src/components/common/ProtectedRoute.jsx` - —É–±—Ä–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥
- –°–∏—Å—Ç–µ–º–∞ —É–∂–µ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ `AuthContext.jsx`

### –ë—ç–∫–µ–Ω–¥:
- `backend/app/utils/auth_dependencies.py` - **–ù–û–í–´–ô** —Ñ–∞–π–ª —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `backend/app/api/endpoints/admin.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/kitchen.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/courier.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/users.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/analytics.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/marketing.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
- `backend/app/api/endpoints/orders.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞

## üîí –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: `ProtectedRoute` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `user.role` –∏–∑ `AuthContext`
2. **–ë—ç–∫–µ–Ω–¥**: `auth_dependencies.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω –∏ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–û—à–∏–±–∫–∏**: 401 - –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, 403 - –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **Redirect**: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ ‚Üí `/login`, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

- ‚úÖ –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ –±—ç–∫–µ–Ω–¥–µ
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π USER/ADMIN/KITCHEN/COURIER
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
